var extra_args={};function CSESetExtraArgs(e){extra_args=e}function CSEGetExtraArgs(){return extra_args}function getParameterByName(e){var a=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function createSearchRefinementsTabs(e){var a=$("<div></div>").addClass("searchOption-tabs"),t=$("<ul></ul>").addClass("nav nav-tabs");return a.append(t),$.each(e.all_refinements,function(a,n){var r=$("<li></li>");void 0===e.refinement&&""===n.value?r.addClass("active"):e.refinement==n.value&&r.addClass("active"),r.append($("<a></a>").attr("href","#").html(n.label).on("click",function(a){CSEPerformSearch(e.page,n.value),a.preventDefault()})),t.append(r)}),a}function createSuggestions(e){var a="";return void 0!==e.results.spelling&&(a=$("<div></div>").attr("id","api-url").append($("<span></span>").html("You searched for "+e.query+". Did you mean ")).append($("<a></a>").attr("href","#").html(e.results.spelling.htmlCorrectedQuery).on("click",function(a){$("div.csesearch input#q").val(e.results.spelling.correctedQuery),CSEPerformSearch(e.page),a.preventDefault()}))),a}function createSearchBar(e){var a=$("<div></div>").attr("id","searchbar").addClass("row"),t=$("<div></div>").addClass("col-md-12");return a.append(t),t.append($("<b></b>").html("Search Results")),t.append($("<span></span>").html(" Results ").append($("<b></b>").html(e.start)).append($("<span></span>").html(" - ")).append($("<b></b>").html(e.end)).append($("<span></span>").html(" for ")).append($("<b></b>").html(e.query))),t.append($("<hr/>")),a}function createPromotionsSection(e){var a="";return void 0!==e.results.promotions&&(a=$("<div></div>").addClass("results promotions"),$.each(e.results.promotions,function(e,t){var n=$("<div></div>").addClass("row"),r=$("<div></div>").addClass("col-sm-12 results-details").append($("<a></a>").attr("href",t.link).append($("<span></span>").addClass("l").html(t.htmlTitle))).append($("<br/>")).append($("<span></span>").addClass("search-results-snippet").html(void 0!==t.bodyLines?t.bodyLines[0].htmlTitle:"")).append($("<br/>")).append($("<span></span>").addClass("results-url").html(t.link)).append($("<br/>"));n.append(r),a.append(n)})),a}function createResultsSection(e){var a=$("<div></div>").addClass("results");return $.each(e.results.items,function(e,t){var n=$("<div></div>").addClass("row"),r=$("<div></div>").addClass("col-sm-12 results-details").append($("<a></a>").attr("href",t.link).append($("<b></b>").html(t.htmlTitle))).append($("<br/>")).append($("<span></span>").addClass("search-results-snippet").html(t.htmlSnippet)).append($("<br/>")).append($("<span></span>").addClass("results-url").html(t.link));n.append(r),a.append(n)}),a}function createPagination(e){var a="";if(e.show_pagination){a=$("<div></div>").addClass("listingBar");var t=$("<ul></ul>").addClass("pagination");if(a.append(t),void 0!==e.previous){var n=$("<li></li>").addClass("previous").append($("<a></a>").attr("href","#").html(" Previous 10 items ").on("click",function(a){CSEPerformSearch(e.previous,e.refinement),a.preventDefault()}));t.append(n)}if(void 0!==e.next){var r=$("<li></li>").addClass("next").append($("<a></a>").attr("href","#").html(" Next 10 items ").on("click",function(a){CSEPerformSearch(e.next,e.refinement),a.preventDefault()}));t.append(r)}$.each(e.previous_pages,function(a,n){var r=$("<li></li>").append($("<a></a>").attr("href","#").html(n).on("click",function(a){CSEPerformSearch(n,e.refinement),a.preventDefault()}));t.append(r)});var s=$("<li></li>").addClass("active").append($("<a></a>").attr("href","#").html(e.page).on("click",function(e){e.preventDefault()}));t.append(s);var i=!0;if($.each(e.next_pages,function(a,n){void 0!==e.last_page&&n==e.last_page&&(i=!1);var r=$("<li></li>").append($("<a></a>").attr("href","#").html(n).on("click",function(a){CSEPerformSearch(n,e.refinement),a.preventDefault()}));t.append(r)}),i&&void 0!==e.last_page&&e.last_page!==e.page){var p=$("<li></li>").append($("<a></a>").attr("href","#").html("...").on("click",function(e){e.preventDefault()})).append($("<a></a>").attr("href","#").html(e.last_page).on("click",function(a){CSEPerformSearch(e.last_page,e.refinement),a.preventDefault()}));t.append(p)}}return a}function populateSearchResults(e){var a=$("div#cse-search-results");a.html(""),""==e.query?a.append($("<div></div>").addClass("results").html("Please enter something to search for.")):0==e.total?a.append($("<div></div>").addClass("results").html("No results found.")):(a.append(createSearchRefinementsTabs(e)),a.append(createSuggestions(e)),a.append(createSearchBar(e)),e.show_promotions&&a.append(createPromotionsSection(e)),a.append(createResultsSection(e)),a.append(createPagination(e)))}function CSEPerformSearch(e,a){var t=$("div.csesearch input#q").val(),n=$("div.csesearch select#sort_by");n.off("change").on("change",function(t){CSEPerformSearch(e,a)});var r=n.val();e||(e=1),a||(a="");var s=CSEGetExtraArgs();$.ajax({url:"@@csesearchresults",data:{q:t,sort_by:r,page:e,refinement:a,extra_args:JSON.stringify(s)}}).done(function(e){populateSearchResults(e)})}$(function(){if(console.log("collective.cse ready!"),0!=$("div.csesearch input#q").length){var e=getParameterByName("q");$("div.csesearch input#q").val(e),$("div.csesearch form#cse-search-form").on("submit",function(e){CSESetExtraArgs({}),CSEPerformSearch(),e.preventDefault()}),CSEPerformSearch()}}),define("/vagrant/src/collective.cse/src/collective/cse/static/js/cse.js",function(){});
//# sourceMappingURL=cse-compiled.js.map