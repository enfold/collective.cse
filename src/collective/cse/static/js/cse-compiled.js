function getParameterByName(e){var a=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function createSearchRefinementsTabs(e){var a=$("<div></div>").addClass("searchOption-tabs"),n=$("<ul></ul>").addClass("nav nav-tabs");return a.append(n),$.each(e.all_refinements,function(a,t){var r=$("<li></li>");void 0===e.refinement&&""===t.value?r.addClass("active"):e.refinement==t.value&&r.addClass("active"),r.append($("<a></a>").attr("href","#").html(t.label).on("click",function(a){performSearch(e.page,t.value),a.preventDefault()})),n.append(r)}),a}function createSuggestions(e){var a="";return void 0!==e.results.spelling&&(a=$("<div></div>").attr("id","api-url").append($("<span></span>").html("You searched for "+e.query+". Did you mean ")).append($("<a></a>").attr("href","#").html(e.results.spelling.htmlCorrectedQuery).on("click",function(a){$("div.csesearch input#q").val(e.results.spelling.correctedQuery),performSearch(e.page),a.preventDefault()}))),a}function createSearchBar(e){var a=$("<div></div>").attr("id","searchbar").addClass("row"),n=$("<div></div>").addClass("col-md-12");return a.append(n),n.append($("<b></b>").html("Search Results")),n.append($("<span></span>").html(" Results ").append($("<b></b>").html(e.start)).append($("<span></span>").html(" - ")).append($("<b></b>").html(e.end)).append($("<span></span>").html(" for ")).append($("<b></b>").html(e.query))),n.append($("<hr/>")),a}function createPromotionsSection(e){var a="";return void 0!==e.results.promotions&&(a=$("<div></div>").addClass("results promotions"),$.each(e.results.promotions,function(e,n){var t=$("<div></div>").addClass("row"),r=$("<div></div>").addClass("col-sm-12 results-details").append($("<a></a>").attr("href",n.link).append($("<span></span>").addClass("l").html(n.htmlTitle))).append($("<br/>")).append($("<span></span>").addClass("search-results-snippet").html(void 0!==n.bodyLines?n.bodyLines[0].htmlTitle:"")).append($("<br/>")).append($("<span></span>").addClass("results-url").html(n.link)).append($("<br/>"));t.append(r),a.append(t)})),a}function createResultsSection(e){var a=$("<div></div>").addClass("results");return $.each(e.results.items,function(e,n){var t=$("<div></div>").addClass("row"),r=$("<div></div>").addClass("col-sm-12 results-details").append($("<a></a>").attr("href",n.link).append($("<b></b>").html(n.htmlTitle))).append($("<br/>")).append($("<span></span>").addClass("search-results-snippet").html(n.htmlSnippet)).append($("<br/>")).append($("<span></span>").addClass("results-url").html(n.link));t.append(r),a.append(t)}),a}function createPagination(e){var a="";if(e.show_pagination){a=$("<div></div>").addClass("listingBar");var n=$("<ul></ul>").addClass("pagination");if(a.append(n),void 0!==e.previous){var t=$("<li></li>").addClass("previous").append($("<a></a>").attr("href","#").html(" Previous 10 items ").on("click",function(a){performSearch(e.previous,e.refinement),a.preventDefault()}));n.append(t)}if(void 0!==e.next){var r=$("<li></li>").addClass("next").append($("<a></a>").attr("href","#").html(" Next 10 items ").on("click",function(a){performSearch(e.next,e.refinement),a.preventDefault()}));n.append(r)}$.each(e.previous_pages,function(a,t){var r=$("<li></li>").append($("<a></a>").attr("href","#").html(t).on("click",function(a){performSearch(t,e.refinement),a.preventDefault()}));n.append(r)});var s=$("<li></li>").addClass("active").append($("<a></a>").attr("href","#").html(e.page).on("click",function(e){e.preventDefault()}));n.append(s);var p=!0;if($.each(e.next_pages,function(a,t){void 0!==e.last_page&&t==e.last_page&&(p=!1);var r=$("<li></li>").append($("<a></a>").attr("href","#").html(t).on("click",function(a){performSearch(t,e.refinement),a.preventDefault()}));n.append(r)}),p&&void 0!==e.last_page&&e.last_page!==e.page){var l=$("<li></li>").append($("<a></a>").attr("href","#").html("...").on("click",function(e){e.preventDefault()})).append($("<a></a>").attr("href","#").html(e.last_page).on("click",function(a){performSearch(e.last_page,e.refinement),a.preventDefault()}));n.append(l)}}return a}function populateSearchResults(e){var a=$("div#cse-search-results");a.html(""),""==e.query?a.append($("<div></div>").addClass("results").html("Please enter something to search for.")):0==e.total?a.append($("<div></div>").addClass("results").html("No results found.")):(a.append(createSearchRefinementsTabs(e)),a.append(createSuggestions(e)),a.append(createSearchBar(e)),a.append(createPromotionsSection(e)),a.append(createResultsSection(e)),a.append(createPagination(e)))}function performSearch(e,a){var n=$("div.csesearch input#q").val(),t=$("div.csesearch select#sort_by");t.off("change").on("change",function(n){performSearch(e,a)});var r=t.val();e||(e=1),a||(a=""),$.ajax({url:"@@csesearchresults",data:{q:n,sort_by:r,page:e,refinement:a}}).done(function(e){populateSearchResults(e)})}$(function(){console.log("ready!");var e=getParameterByName("q");$("div.csesearch input#q").val(e),$("div.csesearch form#cse-search-form").on("submit",function(e){performSearch(),e.preventDefault()}),performSearch()}),define("/vagrant/src/collective.cse/src/collective/cse/static/js/cse.js",function(){});
//# sourceMappingURL=cse-compiled.js.map