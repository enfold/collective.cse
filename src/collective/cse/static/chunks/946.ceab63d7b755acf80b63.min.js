"use strict";(self.webpackChunkcollective_cse=self.webpackChunkcollective_cse||[]).push([[946],{946:(e,a,t)=>{var r=t(288),n=t(511),s=t.n(n);t(553).A.extend({name:"csesearch",trigger:".pat-csesearch",parser:"mockup",defaults:{},extra_args:{},CSESetExtraArgs(e){this.extra_args=e},CSEGetExtraArgs(){return this.extra_args},getParameterByName(e){var a=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},createSearchRefinementsTabs(e){var a=this,t=s()("<div></div>").addClass("searchOption-tabs"),r=s()("<ul></ul>").addClass("nav nav-tabs");return t.append(r),s().each(e.all_refinements,(function(t,n){var p=s()("<li></li>");(void 0===e.refinement&&""===n.value||e.refinement==n.value)&&p.addClass("active"),p.append(s()("<a></a>").attr("href","#").html(n.label).on("click",(function(t){a.CSEPerformSearch(e.page,n.value),t.preventDefault()}))),r.append(p)})),t},createSuggestions(e){var a=this,t=s()(a.$el),r="";return void 0!==e.results.spelling&&(r=s()("<div></div>").attr("id","api-url").append(s()("<span></span>").text("You searched for "+e.query+". Did you mean ")).append(s()("<a></a>").attr("href","#").html(e.results.spelling.htmlCorrectedQuery).on("click",(function(r){s()("input#q",t).val(e.results.spelling.correctedQuery),a.CSEPerformSearch(e.page),r.preventDefault()})))),r},createSearchBar(e){var a=s()("<div></div>").attr("id","searchbar").addClass("row"),t=s()("<div></div>").addClass("col-md-12");return a.append(t),t.append(s()("<b></b>").text("Search Results")),t.append(s()("<span></span>").text(" Results ").append(s()("<b></b>").text(e.start)).append(s()("<span></span>").text(" - ")).append(s()("<b></b>").text(e.end)).append(s()("<span></span>").text(" for ")).append(s()("<b></b>").text(e.query))),t.append(s()("<hr/>")),a},createPromotionsSection(e){var a="";return void 0!==e.results.promotions&&(a=s()("<div></div>").addClass("results promotions"),s().each(e.results.promotions,(function(e,t){var r=s()("<div></div>").addClass("row"),n=s()("<div></div>").addClass("col-sm-12 results-details").append(s()("<a></a>").attr("href",t.link).append(s()("<span></span>").addClass("l").html(t.htmlTitle))).append(s()("<br/>")).append(s()("<span></span>").addClass("search-results-snippet").html(void 0!==t.bodyLines?t.bodyLines[0].htmlTitle:"")).append(s()("<br/>")).append(s()("<span></span>").addClass("results-url").html(t.link)).append(s()("<br/>"));r.append(n),a.append(r)}))),a},createResultsSection(e){var a=s()("<div></div>").addClass("results");return s().each(e.results.items,(function(e,t){var r=s()("<div></div>").addClass("row"),n=s()("<div></div>").addClass("col-sm-12 results-details").append(s()("<a></a>").attr("href",t.link).append(s()("<b></b>").text(t.htmlTitle))).append(s()("<br/>")).append(s()("<span></span>").addClass("search-results-snippet").text(t.htmlSnippet)).append(s()("<br/>")).append(s()("<span></span>").addClass("results-url").text(t.link));r.append(n),a.append(r)})),a},createPagination(e){var a=this,t="";if(e.show_pagination){t=s()("<div></div>").addClass("listingBar");var r=s()("<ul></ul>").addClass("pagination");if(t.append(r),void 0!==e.previous){var n=s()("<li></li>").addClass("previous").append(s()("<a></a>").attr("href","#").text(" Previous 10 items ").on("click",(function(t){a.CSEPerformSearch(e.previous,e.refinement),t.preventDefault()})));r.append(n)}if(void 0!==e.next){var p=s()("<li></li>").addClass("next").append(s()("<a></a>").attr("href","#").text(" Next 10 items ").on("click",(function(t){a.CSEPerformSearch(e.next,e.refinement),t.preventDefault()})));r.append(p)}s().each(e.previous_pages,(function(t,n){var p=s()("<li></li>").append(s()("<a></a>").attr("href","#").text(n).on("click",(function(t){a.CSEPerformSearch(n,e.refinement),t.preventDefault()})));r.append(p)}));var i=s()("<li></li>").addClass("active").append(s()("<a></a>").attr("href","#").text(e.page).on("click",(function(e){e.preventDefault()})));r.append(i);var l=!0;if(s().each(e.next_pages,(function(t,n){void 0!==e.last_page&&n==e.last_page&&(l=!1);var p=s()("<li></li>").append(s()("<a></a>").attr("href","#").text(n).on("click",(function(t){a.CSEPerformSearch(n,e.refinement),t.preventDefault()})));r.append(p)})),l&&void 0!==e.last_page&&e.last_page!==e.page){var d=s()("<li></li>").append(s()("<a></a>").attr("href","#").text("...").on("click",(function(e){e.preventDefault()}))).append(s()("<a></a>").attr("href","#").text(e.last_page).on("click",(function(t){a.CSEPerformSearch(e.last_page,e.refinement),t.preventDefault()})));r.append(d)}}return t},populateSearchResults(e){var a=this,t=s()(a.$el),r=s()("div#cse-search-results",t);r.html(""),""==e.query?r.append(s()("<div></div>").addClass("results").text("Please enter something to search for.")):0==e.total?r.append(s()("<div></div>").addClass("results").text("No results found.")):(r.append(a.createSearchRefinementsTabs(e)),r.append(a.createSuggestions(e)),r.append(a.createSearchBar(e)),e.show_promotions&&r.append(a.createPromotionsSection(e)),r.append(a.createResultsSection(e)),r.append(a.createPagination(e)))},async CSEPerformSearch(e,a){var t=this,r=s()(t.$el),n=s()("input#q",r).val(),p=s()("select#sort_by",r);p.off("change").on("change",(async function(r){await t.CSEPerformSearch(e,a)}));var i=p.val();e||(e=1),a||(a="");var l=t.CSEGetExtraArgs();if(void 0===(d=s()("form#cse-search-form",r).data("searchresults-url"))){var d="@@csesearchresults";void 0!==portal_url&&(d=portal_url+"/@@csesearchresults")}s().ajax({url:d,data:{q:n,sort_by:i,page:parseInt(e),refinement:a,extra_args:JSON.stringify(l)}}).done((function(e){t.populateSearchResults(e)}))},async init(){t.e(7).then(t.bind(t,7));var e=this,a=s()(this.el),r=e.getParameterByName("q");s()("input#q",a).val(r),s()("form#cse-search-form",a).on("submit",(async function(a){e.CSESetExtraArgs({}),await e.CSEPerformSearch(),a.preventDefault()})),await e.CSEPerformSearch(),console.log("collective.cse ready!")}});r.A.init()}}]);
//# sourceMappingURL=946.ceab63d7b755acf80b63.min.js.map